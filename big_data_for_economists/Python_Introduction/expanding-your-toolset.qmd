---
title: "Expanding Your Toolset"
author: "Justin Johnson"
date: "2023-10-24"
format: 
    html: 
        toc: true
        toc-depth: 2
        number-sections: false
        mathjax: local
        highlight: tango
    pdf:
        toc: true
        number-sections: true
        colorlinks: true
---

![](images/lec2_image1.png){width=60% #fig-2_1 fig-align="center"} 



# Agenda

- Introduce the need for an expanded toolset
- Discuss each of the tools installed in turn and discuss how/where it will be used in the rest of the course
    - Version Control: Git and GitHub
    - Programming Language: Python
    - IDE (Integrated Development Environment): VS Code
- Group activity to ensure everything is working

# The need for an expanded toolset

## Overall shift in the academy from individual geniuses to groups of people

- Less evident in economics, but still evident.
- What’s the main challenge: groups of people are complex to manage.
- Writing a text document with many authors gets messy quick. With writing code it’s exponentially harder.

![](images/lec2_image2.png){width=100% #fig-2_2}

## Two example that have managed this complexity well: software companies.

- In the last decade there has been an explosion in tools for teams of 1000+ to all write code to the same codebase.
- Example: Microsoft
    - A single code repository with 3.5M files being edited by 4000+ engineers
- Open-source example: Tensorflow
    - Machine-learning library with 1800+ git contributors
    - Have created a massive public good.

### Example of a repository in GitHub: Scikit-learn 

{{< video https://www.youtube.com/watch?v=cMnqOyMQ44Y&t=2s >}}

### My shining beacon of hope: Open-Source Software

- Definition:
    - “Open-source software (OSS) is a type of computer software in which source code is released under a license in which the copyright holder grants users the rights to use, study, change, and distribute the software to anyone and for any purpose.”
    - Example of OSS with InVEST from The Natural Capital Project
- R is another great example of OSS.
    - It’s not just a free, inferior version of STATA. It’s so much more.
    - However, R is specific to statistics (though it can be used to do more), and interacting with a large, interdisciplinary research team can involve broader tasks.
- Today we’re going to discuss an “open-source scientific computing stack” that expands to a broader set of domains.

### Why Python? Why an extra language?

- Although econometrics is still heavily centered on R, the Machine Learning community is dominantly focused on Python
    - Mostly because all of the key machine learning tools were developed in python: Scikit-Learn, PyTorch, TensorFlow, FastAI, etc.
- Python is quickly gaining in usage relative to R, even within econometrics

![**Monthly active users on Github** Source: <https://towardsdatascience.com/data-science-101-is-python-better-than-r-b8f258f57b0f>](images/lec2_image4.png){width=100% #fig-2_4}

### General purpose programming language


- Python is a General-Purpose programming language beyond just statistics, meaning you could:
    - Write your own web server, create a desktop application, make a computer game to test  consumer decision making, automate your coffee pot, email your partner automatically when you are stuck at work late making slides for the lecture the next day but have lost track of time, deal with hundreds of thousands of files automatically, launch zoom with an AI-imposter of yourself listening attentively…
- Quick example from economics that illustrates this: Agent-Based Simulation
- But perhaps most importantly, “Why not both?”
    - You can call R in Python and Python in R, leveraging the benefits of each.
    - Our aim in this class is not to make you an expert in Python, but instead make it so you do not “get stuck” when a challenging problem that needs Python arises.

---

**Python is very easy compared to other languages**

::: {.panel-tabset}

#### *Python or R*
```{python}
print("Hello world!")
```

#### *Java*
![Java HelloWorld](images/lec2_image5.png){width=100% #fig-2_5}

#### C++

![C++ HelloWorld](images/lec2_image6.png){width=100% #fig-2_6}

#### ASSEMBLER X86(DOS, MASM)

![DOS HelloWorld](images/lec2_image7.png){width=100% #fig-2_7}

#### Hexadecimal representations

![Hexadecimal HelloWorld](images/lec2_image8.png){width=100% #fig-2_8}

#### Binary representations

![Binary HelloWorld](images/lec2_binary_helloworld.png){width=100% #fig-binary-helloworld}

:::

### A note on econometrics and causal inference

- Before we dive into ML, where does econometrics fit into this landscape?
    - We are good at causal inference. 
    - From Varian 2014: “Instrumental variables, regression discontinuity, difference-in-differences, various  forms  of  natural  and  designed  experiments  (Angrist  and  Krueger  2001).”
- Machine Learning is only beginning to explore causality.

# Tool 1: Git and Github

![](images/lec2_image9.png){width=100% #fig-2_9}

**Hopefully you have already created a new account on GitHub**

- Went to github.com 
- Created your account
- Sent me your username

--- 

**Today, we are going to use VS Code to get python code**

# Tool 2: VS Code

![](images/lec2_image10.png){width=100% #fig-2_10}

- VS Code works for all languages
- Can even be used to write a whole dissertation 
    - Latex, Overleaf integration, creation of typeset books (we’ll look at these shortly)
- Very customizable
    - Here’s where I set it to Light+ colorscheme
- Has a huge library of “extensions” for different tasks


## The Command Palate

- VS Code is easiest to control using the “`Command Palate`”
    - Open it by pressing `ctrl-shift-p` (MAC: `cmd-shift-p`)

![](images/lec2_image11.png){width=70% #fig-2_11}


- In this box, you can control nearly everything in VS Code
    - For instance, if you type the words “`light theme`” and select that option, you can change to the light theme like me.

## Connect VS Code to Github

- To do this, we will “`Enable Settings Sync`”, which will prompt you to Sign in to GitHub.

- To do this, open the command palate <`Ctrl-Shift-P`> and type “`settings sync`”

![](images/lec2_image12.png){width=100% #fig-2_12}

- Select GitHub as the way to sign on
    - This will launch a browser window to authenticate your computer. 
    - Allow this to happen with “`Open Visual Studio Code`”
    ![](images/lec2_image15.png){width=70% #fig-2_15}

- After login, GitHub will authenticate into VS Code
    - Allow it.
    - We are now able to push and pull code, clone repositories, and contribute to OSS.

    ![](images/lec2_image16.png){width=70% #fig-2_16}

## Before we use Git, let’s talk about file structure

- Make sure you have all the files in google drive.
    - **Three folders**: `Assignments`, `Data` and `Readings` (red)
- In your class folder, make a new folder named `“Repos”`. This is where we will clone the course repository to.
    - If you have your directories arranged exactly this way, it will make “`Relative Paths`” work easily. 

    ![](images/lec2_image17.png){width=70% #fig-2_17}
---

Google drive link: <https://drive.google.com/drive/u/1/folders/1oKDfEOqVLVdq93te-6qTegapdKB_dtq3>

---

## Clone the course repository

- Back in VS Code, in the command palate type the word “clone” (use crtl-shift-p)
    - This will give you a “Clone from Github” option. Paste in the class repository link <https://github.com/jandrewjohnson/apec_8222_2022_fall> and hit enter.
    - ![](images/lec2_image22.png){width=70% #fig-2_22}

- It will ask you where you want to put the Repository.
    - Make a new folder wherever you store your class content named “Repos”, like in the picture here.
- When you hit enter, Git will “clone” (download) the repository, including its entire file history, to your computer.
    - ![](images/lec2_image23.png){width=70% #fig-2_23}
    - It’s hard to explain how awesome Git and version control are, so I won’t explain it. Instead, I’ll just say this is the bedrock of the open-source software revolution.
- When it finishes cloning, it’ll ask you if you want to open the repository.       
    - Say yes!

**If all of the above failed, you can at least get the code by manually downloading from github**

- <https://github.com/jandrewjohnson/apec_8222_2022_fall>
- There is a download Zipfile option in the green code button.
![](images/lec2_image24.png){width=70% #fig-2_24}

# Tool 3: Python

- In VS Code, open the File `“Explorer”`
    - There you will find all the code we just cloned.
    - Open `00_hello_world.py`

![](images/lec2_image25.png){width=100% #fig-2_25}

**Hopefully you’ve already used the Extension tab to install the Python Extension**

- Our first task will be to “`Set the Interpreter`”

- This just means point it to the Python environment we made with Mamba

![](images/lec2_image26.png){width=100% #fig-2_26}

## What did we do with Mamba?

- The mamba command downloaded the entire sum of human knowledge and placed it in this folder.

- Well… not quite the entire sum, but a surprisingly large chunk of it.  
    - This is where all the required Python packages were installed.
    - You could spend a career learning the details of each package, but for now, we’ll just test that it works

![](images/lec2_image27.png){width=70% #fig-2_27}

## Select our interpreter

- Easiest way: Run the python file
    - Click the `Play triangle`.
    ![](images/lec2_interpreter.png){width=70% #fig-2_interpreter}

    
- This will prompt you to Select a Python Interpreter.
    - Click that, and then find the `8222env1` environment you created with Mamba
    ![](images/lec2_image28.png){width=70% #fig-2_28}
    ![](images/lec2_image29.png){width=70% #fig-2_29}

---

- *There are multiple (potentially confusing) ways to set the interpreter*. 
    - If you have a **python (.py)** file open, you can click the **bottom-right yellow bar**
    ![](images/lec2_image32.png){width=70% #fig-2_32}
    
    - If you have a **Jupyter notebook** open, you can select it in the upper-right of the notebook
    ![](images/lec2_image33.png){width=70% #fig-2_33}

    - If nothing is open, you can use the command-palate (`ctrl-shift-p`) and search for “`python select interpreter`”
    ![](images/lec2_image34.png){width=70% #fig-2_34}

## Jupyter notebooks

- Open up VS Code and use the explorer tab (on the left) to open `01_jupyter_intro.ipynb` in the lecture_notebooks folder
- For the rest of this lecture, we’ll be using only VS Code
![](images/lec2_image35.png){width=70% #fig-2_35}

# Appendix: More VS Code Settings

## About VS “Workspaces” and “Folders”

- By starting `VS Code` in a folder, that folder becomes your "`workspace`". VS Code stores settings that are specific to that workspace in `.vscode/settings.json`, which are separate from user settings that are stored globally.
- I have created some versions of these settings files in the class repository for you to use.
- If you set the class repository as your VS Code folder, it will automatically use these settings.
Alternately, you can run VS Code through the operating system UI, then use `File > Open Folder` to open the project folder

## Open up settings 

- `File menu > Preferences > Settings`

- `Or <CTRL-,>`

![](images/lec2_image36.png){width=70% #fig-2_36}

## Settings I like to play with

When I debug (we’ll talk about this), I like to have the values of variables printed onto the screen as I step through my code.

---

**That annoying lightbulb…**

- Get rid of it in settings if it annoys you.
- Here I didn’t even disguise the fact that this is from `StackOverflow`. 
    - I refuse to devote memory to such things and have outsourced this type of storage to external sources.
    - Real programmers `Copy-Paste`.
- The lightbulb was an icon to the “`Quick Fix`” option for code mistakes. You can do this instead by putting your cursor in a word and typing `<ctrl-.>`

![](images/lec2_image37.png){width=70% #fig-2_37}

---

# Appendix: Behind the scene of Mamba: What that all really did

## Important note: File organization matters

Here’s how I set things up.

![](images/lec2_image38.png){width=70% #fig-2_38}


- It may be useful for you to set things up similarly, but it’s up to you.

- First off, if I’m working on a some arbitrary computer (or cloud service, or Docker image, or on my Steam Deck, etc), I choose to save everything in my “`User directory`”. This helps it be similar across operating systems.

- But I hate all the clutter in the User dir put here automatically by other programs, so I put everything I care about in a `“Files”` directory.


## Cloud integration

![](images/lec2_image39.png){width=70% #fig-2_39}


- If I’m on my own machine, I have an identically organized “File” directory in my google drive.

- Here too it’s always full of clutter automatically put there by others.

- This setup lets you work seamlessly across many computers

---

**However you choose to set up your folders, please configure your directory for this course as follows**

![](images/lec2_image40.png){width=70% #fig-2_40}


- You can download the default configuration of this in the courses’ google drive page.
- Important notes:
    - We will use `Git` to put our code in the `Repos` directory.
    - The `Data` directory will have data used in assignments and such.
    - If you have exactly this file setup, it will be easy to create correct “`relative paths`” later on.


---

## Here is where Mamba installed everything

**Look we’ve got Python!**

![](images/lec2_image41.png){width=70% #fig-2_41}

**And here’s our new environment!**

![](images/lec2_image42.png){width=70% #fig-2_42}

When we selected the interpreter in VS Code, all we really did it point it to that folder

## Optional `PATH` step

- If you didn’t select to "`Add Mambaforge to my PATH environment Variable`”, you can set it with the following `(WINDOWS ONLY) command`.’

- Where you replace `User` with `your own user directory`.

`SETX PATH "%PATH%;C:\Users\User\mambaforge;C:\Users\User\mambaforge;"`

# Appendix: More details about Git and Version Control

## Git Details

![](images/lec2_image43.png){width=70% #fig-2_43}

## Creating new repos

![](images/lec2_image44.png){width=70% #fig-2_44}


- VSCode has the “`Publish to Github`” option to create a repository on Github when there is no existing git repository.

- Create your project folder locally and add your `README.md` file.

## Git from the ground up (using the command line)

::: columns
::: {.column width="40%"}
![Git Folder with your Code](images/lec2_folderwithyourcode.png){width=70% #fig-folderwithyourcode}
:::

::: {.column width="60%"}
- Initial state:
    - If your hard drive dies, you’re in major trouble
    - Perhaps you’ve backed up your files, but how long ago was that?

:::
:::


## Git from the ground up

::: columns
::: {.column width="40%"}
![Git from the ground up (Step 1)](images/lec2_gitfromground.png){width=70% #fig-gitfromground}
:::

::: {.column width="60%"}
- **Step 1**: Initialize your folder as a Git Repository 
    - At this point, your files are now “version controlled” and have a full history saved, but only for you and only on your local machine (still quite useful)
- At this point, you might go ahead and make a new file.

:::
:::

---

::: columns
::: {.column width="40%"}
![Git from the ground up (Step 2)](images/lec2_gitfromground2.png){width=70% #fig-gitfromground2}
:::

::: {.column width="60%"}
- **Step 2**: Add files to the repo
    - First “add” files to the repository
    - Then “commit” them to the repository

- **Command**:
    - `git add new_file.py`

    - `git commit –m “I added the initial files”`
:::
:::

---

::: columns
::: {.column width="40%"}
![Git from the ground up (Step 3)](images/lec2_gitfromground3.png){width=70% #fig-gitfromground3}
:::

::: {.column width="60%"}
- **Step 3**: Create a “remote” repository
    - On *github.com*, create a new repository

:::
:::

![GitHub Repository Demo](images/lec2_image45.png){width=70% #fig-lec2_45}

---

::: columns
::: {.column width="40%"}
![Git from the ground up (Step 4)](images/lec2_gitfromground4.png){width=70% #fig-gitfromground4}
:::

::: {.column width="60%"}
- **Step 4**: Connect your local repository to the remote
- Command:
    - `git remote add origin https://github.com/user/repo.git`
        - `Origin` is the standard name that Git gives to your primary remote repository.

:::
:::

---

::: columns
::: {.column width="40%"}
![Git from the ground up (Step 5)](images/lec2_gitfromground5.png){width=70% #fig-gitfromground5}
:::

::: {.column width="60%"}
- **Step 5**: `Push` your changed local code to the remote.

- Command:
    - `git push`

:::
:::

---

::: columns
::: {.column width="40%"}
![Git from the ground up (Step 6)](images/lec2_gitfromground6.png){width=70% #fig-gitfromground6}
:::

::: {.column width="60%"}
- **Step 6**: Add new contributor via GitHub.com
    - Tell them to `clone` your repo


- Command:
    - `git clone https://github.com/user/repo.git `

:::
:::

---

::: columns
::: {.column width="40%"}
![Git from the ground up (Step 7)](images/lec2_gitfromground7.png){width=70% #fig-gitfromground7}
:::

::: {.column width="60%"}
- **Step 7**: Suppose they change a file.
    -  They would then add, commit and push the new file.
    - But now your files are different!

:::
:::

---

::: columns
::: {.column width="40%"}
![Git from the ground up (Step 8)](images/lec2_gitfromground8.png){width=70% #fig-gitfromground8}
:::

::: {.column width="60%"}
- **Step 8**: BEFORE YOU START CODING, you must pull their changes.
    - If you didn’t change the file, you’re all good.
    - If you did, you will have to “`merge`” the files, choosing line-by-line which one to accept.

- Command:
    - `git pull`

:::
:::

## Using Git from the command line

![](images/lec2_image46.png){width=70% #fig-2_46}


**Navigate to the folder’s repository, right click on the directory, select `Git Bash` Here**

--- 

![](images/lec2_image47.png){width=70% #fig-2_47}

- For a first command, just type “git”
- Now you’re ready to implement the commands above. For a reminder, they were:

```{python}
#| eval: false

git init
git add new_file.py
git commit –m “I added the initial files”
git remote add origin https://github.com/user/repo.git
git push
git pull

```

## Optional: Version Control Graphical User Interface Installation

- Download GitHub Desktop from desktop.github.com
- When you are installing this, it will prompt you to sign in to GitHub or create a new account. This is a VERY important account. If you do not have an account, create one, though I suggest thinking carefully about the username/email (because if you’re like me, inertia and network effects guarantee this will be your GitHub name for decades)

## BREAKOUT GROUP ACTIVITY
- *Goal*: have 1 person create a new repository on github and have everybody clone the repository to their local computer
- *Bonus goal*, if you finish the above, have someone make a change, push it, then have everyone pull it.

# Other tools/approaches

- Install Pycharm PROFESSIONAL edition (not community edition)
    - <https://www.jetbrains.com/pycharm/download/#section=windows>
    - Just use default installation options given to you.
    - The first time you launch it, you will have the option to install the R plugin. I recommend doing this.
- When it first opens, it will ask you to set a “Project” location, which is really just a folder. Don’t worry about this for now.

- Fun tidbit: Why write on just 1 line at a time when you can write on many? Pycharm lets you write on multiple lines at the same time and smartly paste in a matching list of values (I’ll showcase this in class).

# Getting Python with Anaconda

- `Anaconda` is the basis of Mamba, which is just a faster and more convenient option than Anaconda
    - But, `Anaconda` is probably the most common approach, so I want to mention it.
- You can download the Anaconda distribution of Python at <https://www.anaconda.com/products/individual>
- Install with default options.
    - Anaconda is a HUGE tool with many things built in
    - Some prefer the minimalist Miniconda

---

**The full installation includes Anaconda Navigator, packed full of good tools**

![](images/lec2_image48.png){width=70% #fig-2_48}


- Anaconda is a “distribution” of python that also includes a ton of community-built modules and a handy way for managing them.
- Launch Anaconda Navigator and you will see a TON of very powerful tools

![](images/lec2_image49.png){width=70% #fig-2_49}


- If you haven’t already, launch the Anaconda Navigator
- From here, launch CMD.exe prompt (or mac equivalent)
- For mac, just launch Terminal.

**Protip for context**: This will launch a standard CMD prompt, but with Conda activated. You could do the same by launching a standard CMD.exe, using it to launch launching conda.exe, then initiating the environment with conda init. This is similar to what we did with the Miniforge prompt.

## Setting the interpreter with PyCharms

- Pycharms has you set your project root directory
- Set this to the class repository
![](images/lec2_image50.png){width=70% #fig-2_50}
- This will create a new Python installation specific (may take a while to create all the files) 
![](images/lec2_image51.png){width=60% #fig-2_51}
![](images/lec2_image52.png){width=60% #fig-2_52}

## Create a new environment using Conda

![](images/lec2_image53.png){width=60% #fig-2_53}


- If you haven’t created a project before, this box will pop up where you can select New Environment Using Conda
- Hopefully it will find where you installed Anaconda automatically, but if not, you will have to put this in.

---

**Now we have working IDE capable of software development**

- Navigate to your `03_01_hello_world.py`
- In the run menu, select `Run`, or `Ctrl-Shift-F10`.
- The new window below is a command prompt calling python on your script file.

![](images/lec2_image54.png){width=60% #fig-2_54}

## Installing Packages

- You can see your new environment in Anaconda Navigator
- Select the environment you created in your Project directory
- Select it, then click channels and add “conda-forge”
- Install Numpy and then Matplotlib by searching for them (be sure to select uninstalled when you’re searching)

![](images/lec2_image55.png){width=60% #fig-2_55}

![](images/lec2_image56.png){width=60% #fig-2_56}

## Running Python on the command line

![](images/lec2_image57.png){width=60% #fig-2_57}


After you’ve launched the`CMD prompt` from `Anaconda Navigator`, just type `python`.
You’ll now have a `>>>` on the command line, indicating you are entering python code 

Now we have basic calculator functionality.
You can get back to a normal CMD prompt using the python function `quit()`

![](images/lec2_image58.png){width=60% #fig-2_58}

# Additional Resources

- Earth Lab: <https://www.earthdatascience.org/>
- Actual textbook intermediate
    - <https://github.com/earthlab/earth-analytics-intermediate-earth-data-science-textbook>
- Into textbook
    - <https://github.com/earthlab/earth-analytics-intro-to-earth-data-science-textbook>
- Python course 
    - <https://github.com/earthlab/earth-analytics-python-course>
- Python Bootcamp
    - <https://github.com/earthlab/earth-analytics-bootcamp-course>
- Environment setup
    - <https://github.com/earthlab/earth-analytics-setup-python-env-workshop>
- Plotting textbook
    - <https://github.com/earthlab/earth-analytics-scientists-guide-to-plotting-data-in-python-textbook>
- GIS textbook
    - <https://github.com/earthlab/earth-analytics-open-gis-python-workshop>
- Open science textbook
    - <https://github.com/earthlab/earth-analytics-open-science-workshop>
- Climate 101 workbooks
    - <https://github.com/earthlab/climate-data-101>
- Dockerfiles
    - <https://github.com/earthlab/dockerfiles>
- R integration
    - <https://github.com/earthlab/earth-analytics-tidyverse-clean-code-r-workshop>

## Spatial Data Viewer Installation

- Install QGIS from: <https://qgis.org/en/site/forusers/download.html>
    - NOTE: I recommend getting QGIS Standalone Installer 64bit

- Fun tidbit: QGIS used to be an inferior free version of ArcGIS but now challenges (and in my opinion surpasses) it in most key metrics.

## Colab?

- <https://colab.research.google.com/>
- Guide
    - <https://web.eecs.umich.edu/~justincj/teaching/eecs442/WI2021/colab.html>

## Popularity matters

![](images/lec2_image59.png){width=60% #fig-2_59}


- IDE usage over time: VS Code is winning.

![](images/lec2_image60.png){width=60% #fig-2_60}

- Language usage over time: Python is winning.

## The original tool(s): The Command Line

![](images/lec2_originaltools.png){width=60% #fig-originaltools}

# In Class Exercise 1.1: Python on the command line

- Run Python the “the real way”
- Open your `Miniforge Prompt`
- Activate the environment you created
- Launch python by just typing “python”
- Write the canonical “Hello World!” using the command 
- `print(“Hello World!”)`
- You’ll notice you’re using Python because of the `>>>` at the beginning of each line.
- To get back to a “normal” command prompt, type the command
- `quit()` 
- Celebrate!

![](images/lec2_image65.png){width=60% #fig-2_65}


# Basics of Python

## Different ways of using Python

1. Type Python code directly in the command line (what we just did)
2. Use the command line to tell Python to run a .py file
Common stumbling block: you have to make sure your current working directory in folder where your code is
In the Command Prompt pictured, I ran a .py file and it outputted straight back

![](images/lec2_image66.png){width=60% #fig-2_66}

*Run in a local Integrated Development Environment*

4. Run on a remote computer you control (via SSH or some other protocol)
5. Run a cloud compute server (this assumes you could do the Mambaforge steps, or something similar, on the cloud
Amazon AWS, Google Cloud, and Microsoft Azure are the three big ones
6. Run in a “containerized” version using Docker, Kubernetes, etc.
7. Launch a python script on a high-performance computing (HPC) cluster
Sometimes, they will even give you the ability to run a jupyter notebook!
8. Browser/Git-based IDE envioronments (Google Colab)

# Other reseources still to pull in

- <https://www.tomasbeuzen.com/python-programming-for-data-science/README.html>
    - <https://github.com/TomasBeuzen/python-programming-for-data-science>
- <https://aeturrell.github.io/coding-for-economists/intro.html>
    - <https://github.com/aeturrell/coding-for-economists>
- <https://python-programming.quantecon.org/intro.html>
- <https://python.quantecon.org/intro.html>
    - <https://github.com/QuantEcon/lecture-python.notebooks>
- <https://python-advanced.quantecon.org/intro.html>


